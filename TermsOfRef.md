Цель: 

**Разработать парсер заголовочных файлов языка программирования C стандарта C99**

**1. Задачи:**

а. Разработать подсистему парсинга (разбора текстового представления в структурированный вид).
б. Разработать подсистему сохранения и загрузки результатов разбора.
в. Разработать подсистему вывода разобранной информации по запросу пользователем.

**2. Требования к выполнению:**

По пункту 1а:
- Парсер должен иметь возможность извлекать:
	*#ifdef ВАРИАНТ1*
	- функции и их сигнатуры: возвращаемый тип, имя, аргументы;
	- объявления простых типов typedef: имя объявляемого типа и целевого типа;
	- директивы компилятора define, в части только "объявления переменных" (то есть макросы функции пропускаются): имя макроса и значение;
	*#endif*

	*#ifdef ВАРИАНТ2*
	- функции и их сигнатуры: возвращаемый тип, имя, аргументы;
	- объявление глобальных переменных: имена переменных, их тип данных, а также значения;
	- директивы компилятора ifdef, ifndef: выражение условие
	- директивы компиляторы include: необходимо сохранять вкладываемый файл;
	*#endif*

	*#ifdef BONUS*
	- Бонус 1: локальные переменные объявленные внутри inline-функций: имя, тип, выражение;
	- Бонус 2: структуры и объявление структур: имя структуры, а также все поля с их типами;
	*#endif*

- Для всех извлекаемых элементов необходимо также сохранять номер строки, где была найдена конструкция.
- Если программное обеспечение не может разобрать конструкцию (из указанного перечня) в заданном заголовочном файле, в стандартный поток вывода должно быть выдано предупреждение с указанием номера строки. При этом парсинг не должен быть остановлен и остальные конструкции из заголовочного файла должны быть разобраны.
- Предполагается, что заголовочный файл полностью корректен, соответствует указанному стандарту, написан без ошибок и предупреждений компилятора.
- В результате парсинга должно быть составлено внутреннее представление (далее CHeaderView) в памяти ВМ Python в виде структуры классов. При этом каждый из разобранных элементов заголовочного файла должен быть представлен в структурирован виде с использованием классов с возможностью удобного доступа к его внутренним элементам.
- CHeaderView должно иметь методы для получения (итерации): функций, объявлений типов, директив компилятора и т.п.

По пункту 1б:
- CHeaderView должно иметь возможность конвертации в структуру из словарей и списков (реализован метод магический метод `__dict__`)
- Сохранение CHeaderView в файл должно быть реализовано в формат JSON.
- Должно быть реализована возможность полного восстановления CHeaderView из сохраненного файла в формате JSON.

По пункту 1в:
- Программа должна иметь comand-line интерфейс, со следующими аргументами (допускается добавлять другие аргументы при необходимости):
	- Вывести список всех функций (-of, --output-functions)
	- Вывести список всех директив компилятора (-od, --output-directives)
	- Вывести список всех объявлений типов (-ot, output-types)
	- Вывод "бонусов"
	- Входной файл для парсинга или сохраненный файл (-f, --input-file); программа должна сама определить тип файла по расширению, если расширение неуказано или указано неверно - ошибка использования программы
	- Файл сохранение (-j, --json); программа должна записать в него результат парсинга, если на вход был указан JSON - сохранить загруженное состояние в указаный JSON-файл.
	- Бонус 3: входным файлом является входной поток, то есть чтобы разработанное программное обеспечение можно было использовать таким образом `cat shadowk1337.h | c-header-parser.py --json shadowk1337.json`

Общие требования:
- При реализации программы должны быть сделаны проверки на некорректность передаваемых данных и в случае некорректно заданных параметров - должны быть выведены user-friendly сообщения об ошибке.
- При реализации необходимо руководствоваться принципами ООП, идиоматики языка Python и паттернов проектирования (в тех случаях, где они уместны).
- Парсер должен быть расширяемым и позволять добавление новых элементов заголовочного файла C.
- Не допускается использовать существующие библиотеки для парсинга C-кода, парсер должен быть реализован в рамках данной работы.
- **При реализации должна быть заложена возможность для будущей модификации CHeaderView таким образом, чтобы его структура могла быть конвертирована в табличное представление**

**3. Сроки выполнения:**

- PR с проектом интерфейсов, классов и методов должен быть сделан до 27-го марта 2023;
- PR с реализацией должен быть сделан до 3-го апреля 2023;
- Исправления и доработки (в ходе прохождения CR) могут быть сделаны до 10-го апреля 2023;

**4. Баллы:**

- 9 баллов - корректное выполнение всех (за исключением бонусов) пунктов ТЗ
- 3 балла - реализация бонуса 1 (включая подсистем сохранения/загрузки и взаимодействия с пользователем)
- 3 балла - реализация бонуса 2 (включая подсистем сохранения/загрузки и взаимодействия с пользователем)
- 2 балла - реализация бонуса 3.